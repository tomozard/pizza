(this.webpackJsonppizza=this.webpackJsonppizza||[]).push([[0],{110:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c.n(n),a=c(14),i=c.n(a),o=(c(81),c(15)),s=c(16),u=c(54),d=c(17),j={fetching:!1,products:[]},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_PRODUCT":return Object(d.a)(Object(d.a)({},t),{},{fetching:!0,error:null});case"FETCH_PRODUCT_SUCCESS":return Object(d.a)(Object(d.a)({},t),{},{fetching:!1,products:e.products});case"FETCH_PRODUCT_ERROR":return Object(d.a)(Object(d.a)({},t),{},{fetching:!1,error:e.error});default:return t}},p=c(22),h=c(27),b=c.n(h),O=[],m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CART":var c=b.a.find(t,(function(t){return t.product._id===e.payload.product._id}));if(c){c.amount++;var n=t.filter((function(t){return t.product._id!==e.payload.product._id})),r=[].concat(Object(p.a)(n||[]),[c]);return r}var a=[].concat(Object(p.a)(t||[]),[e.payload]);return a;case"REMOVE_CART":var i=t.filter((function(t){return t.product._id!==e.payload.product._id}));return i;case"UPDATE_CART":var o=b.a.find(t,(function(t){return t.product._id===e.payload.product._id}));if(o){var s=t.filter((function(t){return t.product._id!==e.payload.product._id})),u=[].concat(Object(p.a)(s||[]),[o]);return u}return t;case"CLEAR_CART":return[];case"GET_CART":default:return t}},x=Object(s.c)({products:l,carts:m}),f=Object(s.a)(u.a)(s.d)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),g=c(136),_=c(129),v=c(21),y=c(20),C=c.n(y),R=c(34),E=function(t,e){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(n.useState)([]),a=Object(v.a)(r,2),i=a[0],o=a[1],s=Object(n.useState)(!1),u=Object(v.a)(s,2),d=u[0],j=u[1],l=Object(n.useState)(!1),h=Object(v.a)(l,2),b=h[0],O=h[1],m=function(){var c=Object(R.a)(C.a.mark((function c(){return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,j(!0),c.t0=o,c.next=5,t.apply(void 0,Object(p.a)(e));case 5:c.t1=c.sent,(0,c.t0)(c.t1),c.next=12;break;case 9:c.prev=9,c.t2=c.catch(0),O(!0);case 12:return c.prev=12,j(!1),c.finish(12);case 15:case"end":return c.stop()}}),c,null,[[0,9,12,15]])})));return function(){return c.apply(this,arguments)}}();return Object(n.useEffect)((function(){c&&m()}),[]),[i,d,b,m]},T=c(55),z=c.n(T).a.create({baseURL:"https://test.pizzahut1150.com/api/"}),D={post:function(t,e,c){return z.post(t,e,c)},get:function(t,e){return z.get(t,e)}},A={getProduct:function(){var t=Object(R.a)(C.a.mark((function t(){var e,c,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/products/",t.next=3,D.get("/products/");case 3:return e=t.sent,c=e.data,n=c,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},S=c(132),w=c(126),N=c(137),k=c(128),B=c(133),L=c(131),U=c(130),P=c(134),F=c(56),I=c.n(F),V=function(t){return{type:"UPDATE_CART",payload:{product:t}}},W=c(2),X=Object(w.a)({root:{maxWidth:345},media:{height:140,backgroundSize:"contain"},floatRight:{marginLeft:"auto"}}),H=function(t){var e=X(),c=Object(o.b)(),n=t.product,r=function(){c(function(t){return{type:"ADD_CART",payload:{product:t,amount:1,id:(new Date).getTime()}}}(n))};return Object(W.jsxs)(N.a,{className:e.root,children:[Object(W.jsx)(k.a,{children:Object(W.jsxs)(_.a,{container:!0,children:[Object(W.jsx)(_.a,{item:!0,xs:12,md:4,children:Object(W.jsx)(U.a,{className:e.media,image:"https://test.pizzahut1150.com"+n.image_th,title:n.imagealt_th})}),Object(W.jsx)(_.a,{item:!0,xs:12,md:8,children:Object(W.jsxs)(L.a,{children:[Object(W.jsx)(S.a,{component:"h3",children:n.product_name_th}),Object(W.jsx)(I.a,{text:n.product_detail_th,maxLine:"3",ellipsis:"...",trimRight:!0,basedOn:"letters"}),Object(W.jsxs)(S.a,{variant:"subtitle2",children:["\u0e3f ",n.price]})]})})]})}),Object(W.jsx)(B.a,{children:Object(W.jsx)(P.a,{size:"small",color:"primary",className:e.floatRight,onClick:function(){r()},children:"Add Card"})})]})},M=function(t){var e=E(A.getProduct,[]),c=Object(v.a)(e,4),n=c[0],r=c[1],a=c[2];c[3];return Object(W.jsxs)("div",{children:[Object(W.jsx)(S.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"}),r?Object(W.jsx)("div",{children:"fetching..."}):a?Object(W.jsx)("div",{children:"Fetch Error"}):Object(W.jsx)(_.a,{container:!0,spacing:2,children:n.map((function(t,e){return Object(W.jsx)(_.a,{item:!0,xs:12,sm:6,md:4,children:Object(W.jsx)(H,{product:t})},t.product_id)}))})]})},J=c(63),G=c.n(J),q=c(62),K=c.n(q),Q=c(61),Y=c.n(Q),Z=c(135),$=Object(w.a)({root:{maxWidth:345},media:{height:80,backgroundSize:"contain"},myCartButton:{minWidth:40},myRemoveButton:{minWidth:40,marginLeft:"auto"},floatRight:{marginLeft:"auto"}}),tt=function(t){var e=$(),c=Object(o.b)(),n=t.cart;return Object(W.jsxs)(N.a,{className:e.root,children:[Object(W.jsx)(k.a,{children:Object(W.jsxs)(_.a,{container:!0,children:[Object(W.jsx)(_.a,{item:!0,xs:12,md:4,children:Object(W.jsx)(U.a,{className:e.media,image:"https://test.pizzahut1150.com"+n.product.image_th,title:n.product.imagealt_th})}),Object(W.jsx)(_.a,{item:!0,xs:12,md:8,children:Object(W.jsxs)(L.a,{children:[Object(W.jsxs)(S.a,{component:"h3",children:[n.product.product_name_th," (\u0e3f ",n.product.price,"/\u0e0a\u0e34\u0e49\u0e19)"]}),Object(W.jsxs)(S.a,{variant:"subtitle2",children:["Total : \u0e3f ",n.amount*n.product.price]})]})})]})}),Object(W.jsx)(Z.a,{}),Object(W.jsxs)(B.a,{children:[Object(W.jsx)(P.a,{size:"small",color:"primary",className:e.myCartButton,onClick:function(){n.amount>1&&(n.amount--,c(V(n.product)))},children:Object(W.jsx)(Y.a,{})}),Object(W.jsxs)(S.a,{variant:"subtitle2",children:["\u0e08\u0e33\u0e19\u0e27\u0e19 ",n.amount," \u0e0a\u0e34\u0e49\u0e19"]}),Object(W.jsx)(P.a,{size:"small",color:"primary",className:e.myCartButton,onClick:function(){n.amount<9&&(n.amount++,c(V(n.product)))},children:Object(W.jsx)(K.a,{})}),Object(W.jsx)(Z.a,{orientation:"vertical",flexItem:!0}),Object(W.jsx)(P.a,{size:"small",color:"primary",className:e.myCartButton,onClick:function(){c({type:"REMOVE_CART",payload:{product:n.product}})},children:Object(W.jsx)(G.a,{})})]})]})},et=function(t){var e=Object(o.c)((function(t){return t.carts}));return Object(n.useEffect)((function(){console.log("Cart Update",e,e.length)}),[e]),Object(W.jsxs)("div",{children:[Object(W.jsx)(S.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"\u0e15\u0e30\u0e01\u0e23\u0e49\u0e32\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"}),Object(W.jsx)(_.a,{container:!0,spacing:2,children:e.length>0&&b.a.orderBy(e,["id"]).map((function(t,e){return Object(W.jsx)(_.a,{item:!0,xs:12,children:Object(W.jsx)(tt,{cart:t})},t.id)}))})]})};var ct=function(){return Object(W.jsx)(o.a,{store:f,children:Object(W.jsx)(g.a,{style:{padding:"12px 24px"},children:Object(W.jsxs)(_.a,{container:!0,spacing:2,children:[Object(W.jsx)(_.a,{item:!0,xs:9,style:{borderRight:"1px dashed #ccc"},children:Object(W.jsx)(M,{})}),Object(W.jsx)(_.a,{item:!0,xs:3,children:Object(W.jsx)(et,{})})]})})})},nt=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,139)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),r(t),a(t),i(t)}))};i.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(ct,{})}),document.getElementById("root")),nt()},81:function(t,e,c){}},[[110,1,2]]]);
//# sourceMappingURL=main.5ee4a50f.chunk.js.map